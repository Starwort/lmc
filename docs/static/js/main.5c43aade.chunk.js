(this.webpackJsonplmc=this.webpackJsonplmc||[]).push([[0],{82:function(e,t,a){},83:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),o=a.n(i),c=a(15),s=a(7),l=a(135),d=a(136),u=a(123),p=a(126),b=a(128),j=a(129),h=a(58),m=Object(h.a)({palette:{type:"dark",primary:{main:"#bb86fc",dark:"#C191FC",contrastText:"#000000"},secondary:{main:"#03dac6",dark:"#03dac6",contrastText:"#000000"},error:{main:"#cf6679"},background:{paper:"#1e1e1e",default:"#121212"},text:{primary:"rgba(255,255,255,87%)",secondary:"rgba(255,255,255,60%)",hint:"rgba(255,255,255,60%)",disabled:"rgba(255,255,255,38%)"}},zIndex:{appBar:1250}});m.overrides={MuiAppBar:{colorPrimary:{backgroundColor:m.palette.background.paper,color:m.palette.primary.main},colorSecondary:{backgroundColor:m.palette.background.paper,color:m.palette.secondary.main},colorDefault:{backgroundColor:m.palette.background.paper,color:m.palette.text.primary}},MuiDrawer:{paper:{width:240}},MuiListItemIcon:{root:{color:m.palette.text.primary}}};var x=m,g=(a(82),a(56)),w=a(34),v=a(23),O=a(17),f=a(60),C=a(59),y=a(137),k=a(127),S=a(139),T={INP:901,OUT:902,OTC:922,HLT:0,COB:0,DAT:0},A={ADD:100,SUB:200,STA:300,LDA:500,BRA:600,BRZ:700,BRP:800,DAT:0},B=["INP","OUT","OTC","HLT","COB","ADD","SUB","STA","LDA","BRA","BRZ","BRP","DAT"],D=(a(83),a(4)),I="        ";function N(e,t,a){var n=e.split(t),r=n.slice(a).join(t),i=n.slice(0,a);return i.push(r),i}var U=function(e){Object(f.a)(a,e);var t=Object(C.a)(a);function a(e){var n,r;return Object(w.a)(this,a),(r=t.call(this,e)).state=void 0,r.errorText=void 0,r.code=void 0,r.errorText="",r.state={code:r.code="",errorText:"",autoFormat:null===(n=e.autoFormatCode)||void 0===n||n},r.codeChanged=r.codeChanged.bind(Object(O.a)(r)),r.changeAutoFormatState=r.changeAutoFormatState.bind(Object(O.a)(r)),r.assemble=r.assemble.bind(Object(O.a)(r)),r}return Object(v.a)(a,[{key:"format",value:function(e){console.log("Formatting code:"),console.log(e);for(var t=e.split("\n"),a=[],n={},r={},i=0,o=0;o<t.length;o++){var c=t[o],l=N(c,"//",2),d=Object(s.a)(l,2),u=d[0],p=d[1];((p=p.trim())||c.endsWith("//"))&&(p="// "+p);var b=(u=u.replace(/ +/g," ").trim()).split(" "),j="",h="",m="";switch(b.length){case 0:break;case 1:if(""===(h=b[0]))break;if(!(h.toUpperCase()in T))if(h.toUpperCase()in A)a.push("Line ".concat(o+1,": '").concat(h.toUpperCase(),"' requires a mailbox"));else{a.push("Line ".concat(o+1,": invalid mnemonic '").concat(h.toUpperCase(),"'"));var x=[h,""];j=x[0],h=x[1]}break;case 2:var g=Object(s.a)(b,2),w=g[0],v=g[1];B.includes(w.toUpperCase())?(m=v,(h=w).toUpperCase()in A||a.push("Line ".concat(o+1,": '").concat(h.toUpperCase(),"' does not take a mailbox"))):(j=w,h=v,B.includes(h.toUpperCase())?h.toUpperCase()in T||a.push("Line ".concat(o+1,": '").concat(h.toUpperCase(),"' requires a mailbox")):a.push("Line ".concat(o+1,": invalid mnemonic '").concat(h.toUpperCase(),"'")));break;case 3:var O=Object(s.a)(b,3);j=O[0],h=O[1],m=O[2],B.includes(h.toUpperCase())?h.toUpperCase()in A||a.push("Line ".concat(o+1,": '").concat(h.toUpperCase(),"' does not take a mailbox")):a.push("Line ".concat(o+1,": invalid mnemonic '").concat(h.toUpperCase(),"'"));break;default:var f=b.slice(0,3),C=Object(s.a)(f,3);j=C[0],h=C[1],m=C[2],p="// "+b.slice(3).join(" "),a.push("Line ".concat(o+1,": Too many parts"))}j&&(n[j]=o),m&&!/^\d+$/.test(m)&&(r[o+1]=m);var y=j;(h||c.endsWith(" "))&&(y+=" "+I.slice(j.length+1)+h.toUpperCase()),h&&(h.toUpperCase()in A&&(y+=" "+I.slice(h.length+1)+m),i++),(p||c.endsWith("//"))&&((j||h||m)&&(y+="  "),y+=p),this.state.autoFormat&&(t[o]=y)}for(var k=0,S=Object.entries(r);k<S.length;k++){var D=Object(s.a)(S[k],2),U=D[0],F=D[1];F in n||a.push("Line ".concat(U,": Undefined label ").concat(F))}return i>100&&a.push("Too many instructions: Got ".concat(i," but only have 100 mailboxes")),this.errorText=a[0]||"",a.length>1&&(this.errorText="".concat(a.length," errors: ")+this.errorText),console.log("Errors:",this.errorText),t.join("\n")}},{key:"assemble",value:function(e){if(!this.errorText){this.props.setAccumulator(0),this.props.setPC(0);var t,a=[],n=[],r={},i=Object(g.a)(e.split("\n"));try{for(i.s();!(t=i.n()).done;){var o=t.value,c=o.split("//",1);if(o=Object(s.a)(c,1)[0]," "!==(o=(o+=" ").replace(/ +/g," "))){var l=o.split(" "),d=Object(s.a)(l,3),u=d[0],p=d[1],b=d[2];u&&(r[u]=n.length),n.push([p,b])}}}catch(O){i.e(O)}finally{i.f()}for(var j=0,h=n;j<h.length;j++){var m=Object(s.a)(h[j],2),x=m[0],w=m[1];/^\d+$/.test(w)?a.push(A[x]+ +w):w?a.push(A[x]+r[w]):a.push(T[x])}for(var v=a.length;v<100;v++)a.push(0);this.props.setMailBoxes(a)}}},{key:"codeChanged",value:function(e){var t={code:this.code=this.format(e.target.value),errorText:"",autoFormat:this.state.autoFormat};t.errorText=this.errorText,this.errorText||this.assemble(t.code),this.setState(t)}},{key:"changeAutoFormatState",value:function(e){var t=e.target.checked?this.format(this.state.code):this.state.code;this.setState({code:t,errorText:this.errorText,autoFormat:e.target.checked})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)(u.a,{style:{margin:8},children:[Object(D.jsxs)(p.a,{style:{paddingBottom:16,display:"flex",flexDirection:"column",alignContent:"center"},children:[Object(D.jsx)(y.a,{multiline:!0,id:"code",variant:"filled",label:"Code",rows:24,fullWidth:!0,value:this.state.code,error:""!==this.state.errorText,helperText:this.state.errorText,className:"code-panel",onChange:this.codeChanged,disabled:this.props.disabled}),Object(D.jsx)(k.a,{style:{marginRight:0},control:Object(D.jsx)(S.a,{color:"primary",checked:this.state.autoFormat,onChange:this.changeAutoFormatState}),label:"Automatically Format Code"})]}),Object(D.jsx)(b.a,{children:Object(D.jsx)(j.a,{onClick:function(){return e.assemble(e.code)},children:"Reassemble"})})]})}}]),a}(r.a.Component),F=a(134),M=a(44),L=a.n(M),P=a(140),R=a(133),E=a(131),V=a(132),W=a(130);var q=function(e){var t=function(){e.setOpen(!1)},a=0,n=r.a.useState(!1),i=Object(s.a)(n,2),o=i[0],c=i[1],l=r.a.useState(""),d=Object(s.a)(l,2),u=d[0],p=d[1];return Object(D.jsxs)(P.a,{open:e.open,onClose:t,"aria-labelledby":"form-dialog-title",children:[Object(D.jsxs)(W.a,{children:["Set value of mailbox ",e.index+1]}),Object(D.jsxs)(E.a,{children:[Object(D.jsx)(V.a,{children:"Enter the new value of this mailbox"}),Object(D.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"New value",variant:"filled",type:"number",error:!!u||o,helperText:u||"Must be an integer from -999 to 999",onChange:function(e){a=e.target.valueAsNumber,isNaN(a)||a%1!==0?p("Must be an integer"):(p(""),c(a<-999||a>999))},fullWidth:!0})]}),Object(D.jsxs)(R.a,{children:[Object(D.jsx)(j.a,{onClick:t,color:"primary",children:"Cancel"}),Object(D.jsx)(j.a,{onClick:function(){e.setMailBox(e.index,a),t()},disabled:o,variant:"contained",color:"primary",children:"Update"})]})]})};var H=function(e){var t,a,n=r.a.useState(!1),i=Object(s.a)(n,2),o=i[0],c=i[1],l=e.dialogue;e.dialogue||e.noDialogue||(L()(void 0!==e.index),L()(void 0!==e.setMailBox),l=Object(D.jsx)(q,{open:o,setOpen:c,setMailBox:e.setMailBox,index:e.index}));var d=null!==(t=e.setDialogueOpen)&&void 0!==t?t:c;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u.a,{style:e.active?{margin:4,color:x.palette.primary.contrastText,backgroundColor:x.palette.primary.main}:{margin:4},variant:"outlined",children:Object(D.jsx)(F.a,{onClick:function(){return d(!0)},children:Object(D.jsx)(p.a,{style:{padding:8,fontFamily:'"Source Code Pro", "Courier New", Courier, monospace'},children:(e.hideSign?"":e.value<0?"-":"+")+Math.abs(e.value).toString().padStart(null!==(a=e.pad)&&void 0!==a?a:3,"0")})})}),e.noDialogue?null:l]})};var J=function(e){var t=function(){e.setOpen(!1)},a=0,n=r.a.useState(!1),i=Object(s.a)(n,2),o=i[0],c=i[1],l=r.a.useState(""),d=Object(s.a)(l,2),u=d[0],p=d[1];return Object(D.jsxs)(P.a,{open:e.open,onClose:t,"aria-labelledby":"form-dialog-title",children:[Object(D.jsxs)(W.a,{children:["Set value of ",e.name]}),Object(D.jsxs)(E.a,{children:[Object(D.jsxs)(V.a,{children:["Enter the new value for the ",e.name]}),Object(D.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"New value",variant:"filled",type:"number",error:!!u||o,helperText:u||"Must be an integer from -999 to 999",onChange:function(e){a=e.target.valueAsNumber,isNaN(a)||a%1!==0?p("Must be an integer"):(p(""),c(a<-999||a>999))},fullWidth:!0})]}),Object(D.jsxs)(R.a,{children:[Object(D.jsx)(j.a,{onClick:t,color:"primary",children:"Cancel"}),Object(D.jsx)(j.a,{onClick:function(){e.setValue(a),t()},disabled:o,variant:"contained",color:"primary",children:"Update"})]})]})};a(93);var Z=function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],i=a[1],o=r.a.useState(!1),l=Object(s.a)(o,2),d=l[0],p=l[1],h=r.a.useState(""),m=Object(s.a)(h,2),x=m[0],g=m[1],w=r.a.useState(0),v=Object(s.a)(w,2),O=v[0],f=v[1];return Object(D.jsxs)(u.a,{style:{width:"fit-content",display:"flex",flexDirection:"column",justifyContent:"center",margin:8,padding:8},children:[Object(c.a)(Array(10)).map((function(t,a){return Object(D.jsx)("div",{className:"row",children:Object(c.a)(Array(10)).map((function(t,n){return Object(D.jsx)(H,{value:e.mailBoxValues[10*a+n],index:10*a+n,active:e.pc===10*a+n,setMailBox:e.setMailBox})}))})})),Object(D.jsxs)("div",{className:"hud",children:[Object(D.jsxs)("div",{className:"acc",children:["Accumulator: ",Object(D.jsx)(H,{value:e.accumulator,setDialogueOpen:i,dialogue:Object(D.jsx)(J,{setValue:e.setAccumulator,open:n,setOpen:i,name:"Accumulator"})})]}),Object(D.jsxs)("div",{className:"pc",children:["Program Counter: ",Object(D.jsx)(H,{value:e.pc,setDialogueOpen:i,hideSign:!0,pad:2,dialogue:Object(D.jsx)(J,{setValue:e.setPC,open:n,setOpen:i,name:"Program Counter"})})]}),Object(D.jsxs)("div",{className:"ir",children:["Instruction Register: ",Object(D.jsx)(H,{value:Math.trunc(e.mailBoxValues[e.pc]/100),hideSign:!0,noDialogue:!0,pad:1})]}),Object(D.jsxs)("div",{className:"ar",children:["Address Register: ",Object(D.jsx)(H,{value:e.mailBoxValues[e.pc]%100,hideSign:!0,noDialogue:!0,pad:2})]}),Object(D.jsx)("div",{className:"input-field",children:Object(D.jsx)(y.a,{variant:"filled",fullWidth:!0,type:"number",label:"Input value",disabled:!e.inputActive,error:!!x||d,helperText:x||"Must be an integer from -999 to 999",onChange:function(e){var t=e.target.valueAsNumber;isNaN(t)||t%1!==0?g("Must be an integer"):(g(""),t<-999||t>999?p(!0):(p(!1),f(t)))},onKeyPress:function(t){"Enter"===t.key&&(d||(console.log("setting:",O),e.setAccumulator(O),e.doneAwaiting()),t.preventDefault())}})})]}),Object(D.jsxs)(b.a,{children:[Object(D.jsx)(j.a,{variant:"text",color:"primary",onClick:e.step,disabled:e.running,children:"Step"}),Object(D.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return e.setRunning(!e.running)},children:e.running?"Stop":"Run"}),Object(D.jsx)(k.a,{style:{marginRight:0},control:Object(D.jsx)(S.a,{color:"primary",checked:e.instant,onChange:function(t){e.setInstant(t.target.checked)}}),label:"Run code as fast as possible"})]})]})};var $=function(){for(var e=[],t=0;t<100;t++)e.push(0);var a=r.a.useState(e),n=Object(s.a)(a,2),i=n[0],o=n[1];window.mailBoxes=i;var h=r.a.useState(!1),m=Object(s.a)(h,2),g=m[0],w=m[1];window.running=g;var v=r.a.useState(0),O=Object(s.a)(v,2),f=O[0],C=O[1];window.acc=f;var y=r.a.useState(""),k=Object(s.a)(y,2),S=k[0],T=k[1];window.output=S;var A=r.a.useState(!1),B=Object(s.a)(A,2),I=B[0],N=B[1];window.awaitingInput=I;var F=r.a.useState(!1),M=Object(s.a)(F,2),L=M[0],P=M[1];window.instant=L;var R=r.a.useState(0),E=Object(s.a)(R,2),V=E[0],W=E[1];function q(){if(!window.awaitingInput)if(window.running){var e=window.mailBoxes[window.pc];if(console.log("stepping:",e),window.pc<99&&(window.pc++,W(window.pc)),e<0)return T(S+"\nError: Attempted to execute an invalid opcode\n"),void H(!1);var t,a,n=(t=e,a=100,[Math.trunc(t/a),t%a]),r=Object(s.a)(n,2),i=r[0],o=r[1];switch(i){case 0:return void H(!1);case 1:window.acc=window.acc+window.mailBoxes[o],C(window.acc);break;case 2:window.acc=window.acc-window.mailBoxes[o],C(window.acc);break;case 3:window.mailBoxes[o]=window.acc;break;case 5:window.acc=window.mailBoxes[o],C(window.mailBoxes[o]);break;case 6:window.pc=o,W(o);break;case 7:0===window.acc&&(window.pc=o,W(o));break;case 8:window.acc>=0&&(window.pc=o,W(o));break;case 9:switch(o){case 1:window.awaitingInput=!0,N(!0);break;case 2:T(window.output+window.acc.toString()+"\n");break;case 22:T(window.output+String.fromCharCode(window.acc));break;default:T(window.output+"\nError: Attempted to execute an invalid opcode\n"),H(!1)}break;default:T(window.output+"\nError: Attempted to execute an invalid opcode\n"),H(!1)}}else window.clearInterval(window.timeoutID)}function H(e){window.running=e,w(e),window.timeoutID&&window.clearInterval(window.timeoutID),e&&(window.timeoutID=window.setInterval(q,L?0:2e3))}return window.pc=V,Object(D.jsxs)(l.a,{theme:x,children:[Object(D.jsx)(d.a,{}),Object(D.jsxs)("div",{className:"row",style:{alignItems:"flex-start"},children:[Object(D.jsx)(U,{disabled:g,setMailBoxes:o,setAccumulator:C,setPC:W}),Object(D.jsxs)(u.a,{style:{marginTop:8,width:300},children:[Object(D.jsxs)(p.a,{children:["Output:",Object(D.jsx)("div",{className:"output",children:S})]}),Object(D.jsx)(b.a,{children:Object(D.jsx)(j.a,{onClick:function(){return T("")},children:"Clear output"})})]}),Object(D.jsx)(Z,{mailBoxValues:i,accumulator:f,inputActive:window.awaitingInput,setAccumulator:C,doneAwaiting:function(){window.awaitingInput=!1,N(!1)},running:g,setRunning:H,instant:L,setInstant:P,setMailBox:function(e,t){var a=Object(c.a)(i);a[e]=t,o(a)},step:q,setPC:W,pc:V})]})]})},z=(a(94),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,142)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))});o.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)($,{})}),document.getElementById("root")),z()}},[[95,1,2]]]);
//# sourceMappingURL=main.5c43aade.chunk.js.map