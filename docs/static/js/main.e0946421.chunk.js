(this.webpackJsonplmc=this.webpackJsonplmc||[]).push([[0],{82:function(e,t,a){},83:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(11),r=a.n(o),c=a(15),s=a(7),l=a(135),d=a(136),u=a(123),p=a(126),b=a(128),j=a(129),h=a(58),m=Object(h.a)({palette:{type:"dark",primary:{main:"#bb86fc",dark:"#C191FC",contrastText:"#000000"},secondary:{main:"#03dac6",dark:"#03dac6",contrastText:"#000000"},error:{main:"#cf6679"},background:{paper:"#1e1e1e",default:"#121212"},text:{primary:"rgba(255,255,255,87%)",secondary:"rgba(255,255,255,60%)",hint:"rgba(255,255,255,60%)",disabled:"rgba(255,255,255,38%)"}},zIndex:{appBar:1250}});m.overrides={MuiAppBar:{colorPrimary:{backgroundColor:m.palette.background.paper,color:m.palette.primary.main},colorSecondary:{backgroundColor:m.palette.background.paper,color:m.palette.secondary.main},colorDefault:{backgroundColor:m.palette.background.paper,color:m.palette.text.primary}},MuiDrawer:{paper:{width:240}},MuiListItemIcon:{root:{color:m.palette.text.primary}}};var w=m,x=(a(82),a(56)),g=a(34),v=a(23),O=a(17),f=a(60),C=a(59),y=a(137),k=a(127),S=a(139),T={INP:901,OUT:902,OTC:922,HLT:0,COB:0,DAT:0},A={ADD:100,SUB:200,STA:300,LDA:500,BRA:600,BRZ:700,BRP:800,DAT:0},B=["INP","OUT","OTC","HLT","COB","ADD","SUB","STA","LDA","BRA","BRZ","BRP","DAT"],D=(a(83),a(4)),I="        ";function N(e,t,a){var n=e.split(t),i=n.slice(a).join(t),o=n.slice(0,a);return o.push(i),o}var U=function(e){Object(f.a)(a,e);var t=Object(C.a)(a);function a(e){var n,i;return Object(g.a)(this,a),(i=t.call(this,e)).state=void 0,i.errorText=void 0,i.code=void 0,i.errorText="",i.state={code:i.code="",errorText:"",autoFormat:null===(n=e.autoFormatCode)||void 0===n||n},i.codeChanged=i.codeChanged.bind(Object(O.a)(i)),i.changeAutoFormatState=i.changeAutoFormatState.bind(Object(O.a)(i)),i.assemble=i.assemble.bind(Object(O.a)(i)),i}return Object(v.a)(a,[{key:"format",value:function(e){console.log("Formatting code:"),console.log(e);for(var t=e.split("\n"),a=[],n={},i={},o=0,r=0;r<t.length;r++){var c=t[r],l=N(c,"//",2),d=Object(s.a)(l,2),u=d[0],p=d[1];((p=p.trim())||c.endsWith("//"))&&(p="// "+p);var b=(u=u.replace(/ +/g," ").trim()).split(" "),j="",h="",m="";switch(b.length){case 0:break;case 1:if(""===(h=b[0]))break;if(!(h.toUpperCase()in T))if(h.toUpperCase()in A)a.push("Line ".concat(r+1,": '").concat(h.toUpperCase(),"' requires a mailbox"));else{a.push("Line ".concat(r+1,": invalid mnemonic '").concat(h.toUpperCase(),"'"));var w=[h,""];j=w[0],h=w[1]}break;case 2:var x=Object(s.a)(b,2),g=x[0],v=x[1];B.includes(g.toUpperCase())?(m=v,(h=g).toUpperCase()in A||a.push("Line ".concat(r+1,": '").concat(h.toUpperCase(),"' does not take a mailbox"))):(j=g,h=v,B.includes(h.toUpperCase())?h.toUpperCase()in T||a.push("Line ".concat(r+1,": '").concat(h.toUpperCase(),"' requires a mailbox")):a.push("Line ".concat(r+1,": invalid mnemonic '").concat(h.toUpperCase(),"'")));break;case 3:var O=Object(s.a)(b,3);j=O[0],h=O[1],m=O[2],B.includes(h.toUpperCase())?h.toUpperCase()in A||a.push("Line ".concat(r+1,": '").concat(h.toUpperCase(),"' does not take a mailbox")):a.push("Line ".concat(r+1,": invalid mnemonic '").concat(h.toUpperCase(),"'"));break;default:var f=b.slice(0,3),C=Object(s.a)(f,3);j=C[0],h=C[1],m=C[2],p="// "+b.slice(3).join(" "),a.push("Line ".concat(r+1,": Too many parts"))}j&&(n[j]=r),m&&!/^\d+$/.test(m)&&(i[r+1]=m);var y=j;(h||c.endsWith(" "))&&(y+=" "+I.slice(j.length+1)+h.toUpperCase()),h&&(h.toUpperCase()in A&&(y+=" "+I.slice(h.length+1)+m),o++),(p||c.endsWith("//"))&&((j||h||m)&&(y+="  "),y+=p),this.state.autoFormat&&(t[r]=y)}for(var k=0,S=Object.entries(i);k<S.length;k++){var D=Object(s.a)(S[k],2),U=D[0],F=D[1];F in n||a.push("Line ".concat(U,": Undefined label ").concat(F))}return o>100&&a.push("Too many instructions: Got ".concat(o," but only have 100 mailboxes")),this.errorText=a[0]||"",a.length>1&&(this.errorText="".concat(a.length," errors: ")+this.errorText),console.log("Errors:",this.errorText),t.join("\n")}},{key:"assemble",value:function(e){if(!this.errorText){this.props.setAccumulator(0),this.props.setPC(0);var t,a=[],n=[],i={},o=Object(x.a)(e.split("\n"));try{for(o.s();!(t=o.n()).done;){var r=t.value,c=r.split("//",1);if(r=Object(s.a)(c,1)[0]," "!==(r=(r+=" ").replace(/ +/g," "))){var l=r.split(" "),d=Object(s.a)(l,3),u=d[0],p=d[1],b=d[2];u&&(i[u]=n.length),n.push([p,b])}}}catch(O){o.e(O)}finally{o.f()}for(var j=0,h=n;j<h.length;j++){var m=Object(s.a)(h[j],2),w=m[0],g=m[1];/^\d+$/.test(g)?a.push(A[w]+ +g):g?a.push(A[w]+i[g]):a.push(T[w])}for(var v=a.length;v<100;v++)a.push(0);this.props.setMailBoxes(a)}}},{key:"codeChanged",value:function(e){var t={code:this.code=this.format(e.target.value),errorText:"",autoFormat:this.state.autoFormat};t.errorText=this.errorText,this.errorText||this.assemble(t.code),this.setState(t)}},{key:"changeAutoFormatState",value:function(e){var t=e.target.checked?this.format(this.state.code):this.state.code;this.setState({code:t,errorText:this.errorText,autoFormat:e.target.checked})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)(u.a,{style:{margin:8},children:[Object(D.jsxs)(p.a,{style:{paddingBottom:16,display:"flex",flexDirection:"column",alignContent:"center"},children:[Object(D.jsx)(y.a,{multiline:!0,id:"code",variant:"filled",label:"Code",rows:24,fullWidth:!0,value:this.state.code,error:""!==this.state.errorText,helperText:this.state.errorText,className:"code-panel",onChange:this.codeChanged,disabled:this.props.disabled}),Object(D.jsx)(k.a,{style:{marginRight:0},control:Object(D.jsx)(S.a,{color:"primary",checked:this.state.autoFormat,onChange:this.changeAutoFormatState}),label:"Automatically Format Code"})]}),Object(D.jsx)(b.a,{children:Object(D.jsx)(j.a,{onClick:function(){return e.assemble(e.code)},children:"Reassemble"})})]})}}]),a}(i.a.Component),F=a(134),M=a(44),L=a.n(M),P=a(140),R=a(133),E=a(131),V=a(132),W=a(130);var q=function(e){var t=function(){e.setOpen(!1)},a=0,n=i.a.useState(!1),o=Object(s.a)(n,2),r=o[0],c=o[1],l=i.a.useState(""),d=Object(s.a)(l,2),u=d[0],p=d[1];return Object(D.jsxs)(P.a,{open:e.open,onClose:t,"aria-labelledby":"form-dialog-title",children:[Object(D.jsxs)(W.a,{children:["Set value of mailbox ",e.index+1]}),Object(D.jsxs)(E.a,{children:[Object(D.jsx)(V.a,{children:"Enter the new value of this mailbox"}),Object(D.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"New value",variant:"filled",type:"number",error:!!u||r,helperText:u||"Must be an integer from -999 to 999",onChange:function(e){a=e.target.valueAsNumber,isNaN(a)||a%1!==0?p("Must be an integer"):(p(""),c(a<-999||a>999))},fullWidth:!0})]}),Object(D.jsxs)(R.a,{children:[Object(D.jsx)(j.a,{onClick:t,color:"primary",children:"Cancel"}),Object(D.jsx)(j.a,{onClick:function(){e.setMailBox(e.index,a),t()},disabled:r,variant:"contained",color:"primary",children:"Update"})]})]})};var H=function(e){var t,a,n=i.a.useState(!1),o=Object(s.a)(n,2),r=o[0],c=o[1],l=e.dialogue;e.dialogue||e.noDialogue||(L()(void 0!==e.index),L()(void 0!==e.setMailBox),l=Object(D.jsx)(q,{open:r,setOpen:c,setMailBox:e.setMailBox,index:e.index}));var d=null!==(t=e.setDialogueOpen)&&void 0!==t?t:c;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u.a,{style:e.active?{margin:4,color:w.palette.primary.contrastText,backgroundColor:w.palette.primary.main}:{margin:4},variant:"outlined",children:Object(D.jsx)(F.a,{onClick:function(){return d(!0)},children:Object(D.jsx)(p.a,{style:{padding:8,fontFamily:'"Source Code Pro", "Courier New", Courier, monospace'},children:(e.hideSign?"":e.value<0?"-":"+")+Math.abs(e.value).toString().padStart(null!==(a=e.pad)&&void 0!==a?a:3,"0")})})}),e.noDialogue?null:l]})};var J=function(e){var t=function(){e.setOpen(!1)},a=0,n=i.a.useState(!1),o=Object(s.a)(n,2),r=o[0],c=o[1],l=i.a.useState(""),d=Object(s.a)(l,2),u=d[0],p=d[1];return Object(D.jsxs)(P.a,{open:e.open,onClose:t,"aria-labelledby":"form-dialog-title",children:[Object(D.jsxs)(W.a,{children:["Set value of ",e.name]}),Object(D.jsxs)(E.a,{children:[Object(D.jsxs)(V.a,{children:["Enter the new value for the ",e.name]}),Object(D.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"New value",variant:"filled",type:"number",error:!!u||r,helperText:u||"Must be an integer from -999 to 999",onChange:function(e){a=e.target.valueAsNumber,isNaN(a)||a%1!==0?p("Must be an integer"):(p(""),c(a<-999||a>999))},fullWidth:!0})]}),Object(D.jsxs)(R.a,{children:[Object(D.jsx)(j.a,{onClick:t,color:"primary",children:"Cancel"}),Object(D.jsx)(j.a,{onClick:function(){e.setValue(a),t()},disabled:r,variant:"contained",color:"primary",children:"Update"})]})]})};a(93);var Z=function(e){var t=i.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],r=i.a.useState(!1),l=Object(s.a)(r,2),d=l[0],p=l[1],h=i.a.useState(""),m=Object(s.a)(h,2),w=m[0],x=m[1],g=i.a.useState(0),v=Object(s.a)(g,2),O=v[0],f=v[1];return Object(D.jsxs)(u.a,{style:{width:"fit-content",display:"flex",flexDirection:"column",justifyContent:"center",margin:8,padding:8},children:[Object(c.a)(Array(10)).map((function(t,a){return Object(D.jsx)("div",{className:"row",children:Object(c.a)(Array(10)).map((function(t,n){return Object(D.jsx)(H,{value:e.mailBoxValues[10*a+n],index:10*a+n,active:e.pc===10*a+n,setMailBox:e.setMailBox})}))})})),Object(D.jsxs)("div",{className:"hud",children:[Object(D.jsxs)("div",{className:"acc",children:["Accumulator: ",Object(D.jsx)(H,{value:e.accumulator,setDialogueOpen:o,dialogue:Object(D.jsx)(J,{setValue:e.setAccumulator,open:n,setOpen:o,name:"Accumulator"})})]}),Object(D.jsxs)("div",{className:"pc",children:["Program Counter: ",Object(D.jsx)(H,{value:e.pc,setDialogueOpen:o,hideSign:!0,pad:2,dialogue:Object(D.jsx)(J,{setValue:e.setPC,open:n,setOpen:o,name:"Program Counter"})})]}),Object(D.jsxs)("div",{className:"ir",children:["Instruction Register: ",Object(D.jsx)(H,{value:Math.trunc(e.mailBoxValues[e.pc]/100),hideSign:!0,noDialogue:!0,pad:1})]}),Object(D.jsxs)("div",{className:"ar",children:["Address Register: ",Object(D.jsx)(H,{value:e.mailBoxValues[e.pc]%100,hideSign:!0,noDialogue:!0,pad:2})]}),Object(D.jsx)("div",{className:"input-field",children:Object(D.jsx)(y.a,{variant:"filled",fullWidth:!0,type:"number",label:"Input value",disabled:!e.inputActive,error:!!w||d,helperText:w||"Must be an integer from -999 to 999",onChange:function(e){var t=e.target.valueAsNumber;isNaN(t)||t%1!==0?x("Must be an integer"):(x(""),t<-999||t>999?p(!0):(p(!1),f(t)))},onKeyPress:function(t){"Enter"===t.key&&(d||(console.log("setting:",O),e.setAccumulator(O),e.doneAwaiting()),t.preventDefault())}})})]}),Object(D.jsxs)(b.a,{children:[Object(D.jsx)(j.a,{variant:"text",color:"primary",onClick:e.step,disabled:e.running,children:"Step"}),Object(D.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return e.setRunning(!e.running)},children:e.running?"Stop":"Run"}),Object(D.jsx)(k.a,{style:{marginRight:0},control:Object(D.jsx)(S.a,{color:"primary",checked:e.instant,onChange:function(t){e.setInstant(t.target.checked)}}),label:"Run code as fast as possible"})]})]})};var $=function(){for(var e=[],t=0;t<100;t++)e.push(0);var a=i.a.useState(e),n=Object(s.a)(a,2),o=n[0],r=n[1];window.mailBoxes=o;var h=i.a.useState(!1),m=Object(s.a)(h,2),x=m[0],g=m[1];window.running=x;var v=i.a.useState(0),O=Object(s.a)(v,2),f=O[0],C=O[1];window.acc=f;var y=i.a.useState(""),k=Object(s.a)(y,2),S=k[0],T=k[1];window.output=S;var A=i.a.useState(!1),B=Object(s.a)(A,2),I=B[0],N=B[1];window.awaitingInput=I;var F=i.a.useState(!1),M=Object(s.a)(F,2),L=M[0],P=M[1];function R(e,t){var a=Object(c.a)(o);a[e]=E(t),r(a)}function E(e){return(e+999+1999)%1999-999}window.instant=L;var V=i.a.useState(0),W=Object(s.a)(V,2),q=W[0],H=W[1];function J(){if(!window.awaitingInput)if(window.running){var e=window.mailBoxes[window.pc];if(console.log("stepping:",e),window.pc<99&&(window.pc++,H(window.pc)),e<0)return T(S+"\nError: Attempted to execute an invalid opcode\n"),void $(!1);var t,a,n=(t=e,a=100,[Math.trunc(t/a),t%a]),i=Object(s.a)(n,2),o=i[0],r=i[1];switch(o){case 0:return void $(!1);case 1:window.acc=E(window.acc+window.mailBoxes[r]),C(window.acc);break;case 2:window.acc=E(window.acc-window.mailBoxes[r]),C(window.acc);break;case 3:window.mailBoxes[r]=window.acc,R(r,window.acc);break;case 5:window.acc=window.mailBoxes[r],C(window.mailBoxes[r]);break;case 6:window.pc=r,H(r);break;case 7:0===window.acc&&(window.pc=r,H(r));break;case 8:window.acc>=0&&(window.pc=r,H(r));break;case 9:switch(r){case 1:window.awaitingInput=!0,N(!0);break;case 2:T(window.output+window.acc.toString()+"\n");break;case 22:T(window.output+String.fromCharCode(window.acc));break;default:T(window.output+"\nError: Attempted to execute an invalid opcode\n"),$(!1)}break;default:T(window.output+"\nError: Attempted to execute an invalid opcode\n"),$(!1)}}else window.clearInterval(window.timeoutID)}function $(e){window.running=e,g(e),window.timeoutID&&(window.clearInterval(window.timeoutID),window.timeoutID=void 0),e&&(window.timeoutID=window.setInterval(J,window.instant?0:2e3))}return window.pc=q,Object(D.jsxs)(l.a,{theme:w,children:[Object(D.jsx)(d.a,{}),Object(D.jsxs)("div",{className:"row",style:{alignItems:"flex-start"},children:[Object(D.jsx)(U,{disabled:x,setMailBoxes:r,setAccumulator:C,setPC:H}),Object(D.jsxs)(u.a,{style:{marginTop:8,width:300},children:[Object(D.jsxs)(p.a,{children:["Output:",Object(D.jsx)("div",{className:"output",children:S})]}),Object(D.jsx)(b.a,{children:Object(D.jsx)(j.a,{onClick:function(){return T("")},children:"Clear output"})})]}),Object(D.jsx)(Z,{mailBoxValues:o,accumulator:f,inputActive:window.awaitingInput,setAccumulator:C,doneAwaiting:function(){window.awaitingInput=!1,N(!1)},running:x,setRunning:$,instant:L,setInstant:function(e){window.instant=e,P(e),window.timeoutID&&(window.clearInterval(window.timeoutID),window.timeoutID=window.setInterval(J,window.instant?0:2e3))},setMailBox:R,step:J,setPC:H,pc:q})]})]})},z=(a(94),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,142)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),o(e),r(e)}))});r.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)($,{})}),document.getElementById("root")),z()}},[[95,1,2]]]);
//# sourceMappingURL=main.e0946421.chunk.js.map